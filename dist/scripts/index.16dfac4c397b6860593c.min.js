"use strict";(self.webpackChunkguess_melody_client=self.webpackChunkguess_melody_client||[]).push([[826],{4374:function(e,t,n){var r=n(5893),o=n(7294),s=n(3935),a=n(9704),i=n(6974),c=function(){return c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},c.apply(this,arguments)};var l,u,d,v,h,f,p,m,g,j=function(e){var t=e.history,n=e.basename,s=e.children,a=(0,o.useState)({action:t.action,location:t.location}),l=a[0],u=a[1];return(0,o.useLayoutEffect)((function(){return t.listen(u)}),[t]),(0,r.jsx)(i.F0,c({basename:n,location:l.location,navigationType:l.action,navigator:t},{children:s}),void 0)},x=(0,n(5648).lX)(),y=n(6403),_=n(5857);!function(e){e[e.BAD_REQUEST=400]="BAD_REQUEST",e[e.UNAUTHORIZED=401]="UNAUTHORIZED",e[e.NOT_FOUND=404]="NOT_FOUND"}(l||(l={})),function(e){e.Login="/login",e.Lose="/lose",e.Result="/result",e.Root="/",e.Game="/game",e.NotFound="*"}(u||(u={})),function(e){e.Auth="AUTH",e.NoAuth="NO_AUTH",e.Unknown="UNKNOWN"}(d||(d={})),function(e){e.Artist="artist",e.Genre="genre"}(v||(v={})),function(e){e.Questions="/questions",e.Login="/login",e.Logout="/logout"}(h||(h={})),function(e){e.Process="PROCESS",e.Data="DATA",e.User="USER",e.Error="ERROR"}(f||(f={})),function(e){e.incrementStep="incrementStep",e.checkUserAnswer="checkUserAnswer",e.resetGame="reset",e.loadQuestions="loadQuestions",e.requireAuthorization="requireAuthorization",e.setError="setError"}(p||(p={})),function(e){e.FetchQuestions="/fetchQuestions",e.CheckAuth="/checkAuth",e.Login="/asLogin",e.Logout="/asLogout",e.ClearError="/clearError",e.RedirectToRoute="/redirectToRoute"}(m||(m={}));var w,b,N,O,A,k=(0,y.oM)({name:f.Data,initialState:{questions:[],isDataLoaded:!1},reducers:(g={},g[p.loadQuestions]=function(e,t){e.questions=t.payload,e.isDataLoaded=!0},g)}),P=k.actions.loadQuestions,U={mistakes:0,step:0},R=(0,y.oM)({name:f.Process,initialState:U,reducers:(w={},w[p.incrementStep]=function(e){e.step+=1},w[p.checkUserAnswer]=function(e,t){var n=t.payload,r=n.question,o=n.userAnswer;e.mistakes+=Number(!function(e,t){return e.type===v.Artist&&"string"==typeof t?function(e,t){return t===e.song.artist}(e,t):!(e.type!==v.Genre||!Array.isArray(t))&&function(e,t){return t.every((function(t,n){return t===(e.answers[n].genre===e.genre)}))}(e,t)}(r,o))},w[p.resetGame]=function(e){e.mistakes=U.mistakes,e.step=U.step},w)}),S=(b=R.actions).incrementStep,E=b.reset,C=b.checkUserAnswer,D={authorizationStatus:d.Unknown},L=(0,y.oM)({name:f.User,initialState:D,reducers:(N={},N[p.requireAuthorization]=function(e,t){e.authorizationStatus=t.payload},N)}),T=L.actions.requireAuthorization,q=(0,y.oM)({name:f.Error,initialState:{error:""},reducers:(O={},O[p.setError]=function(e,t){e.error=t.payload},O)}),F=q.actions.setError,G=(0,_.UY)(((A={})[f.Data]=k.reducer,A[f.Process]=R.reducer,A[f.User]=L.reducer,A[f.Error]=q.reducer,A)),Q=n(9669),z=n.n(Q),B="guess-melody-token",I=function(e){return function(e){return function(t){return t.type==="".concat(f.Process).concat(m.RedirectToRoute)&&x.push(t.payload),e(t)}}},W=function(){var e=z().create({baseURL:"https://9.react.pages.academy/guess-melody",timeout:5e3});return e.interceptors.request.use((function(e){var t=function(){var e=localStorage.getItem(B);return null!=e?e:""}();return e.headers||(e.headers={}),t&&(e.headers["x-token"]=t),e})),e}(),H=(0,y.xC)({reducer:G,middleware:function(e){return e({thunk:{extraArgument:W}}).concat(I)}}),M=function(){return(0,a.I0)()},Y=a.v9,Z=n(9711),K=function(){return K=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},K.apply(this,arguments)};var X=function(){return(0,r.jsxs)(Z.rU,K({className:"game__back",to:"/"},{children:[(0,r.jsx)("span",K({className:"visually-hidden"},{children:"Сыграть ещё раз"}),void 0),(0,r.jsx)("img",{className:"game__logo",src:"images/melody-logo-ginger.png",alt:"Угадай мелодию"},void 0)]}),void 0)},J=function(){return J=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},J.apply(this,arguments)};var V=function(){return(0,r.jsxs)("section",J({className:"game"},{children:[(0,r.jsxs)("header",J({className:"game__header"},{children:[(0,r.jsx)(X,{},void 0),(0,r.jsx)("svg",J({xmlns:"http://www.w3.org/2000/svg",className:"timer",viewBox:"0 0 780 780"},{children:(0,r.jsx)("circle",{className:"timer__line",cx:"390",cy:"390",r:"370",style:{filter:"url(#blur)",transform:"rotate(-90deg) scaleY(-1)",transformOrigin:"center"}},void 0)}),void 0)]}),void 0),(0,r.jsxs)("section",J({className:"game__screen"},{children:[(0,r.jsx)("h1",{children:"404. Page not found"},void 0),(0,r.jsx)(Z.rU,J({to:"/"},{children:"Вернуться на главную"}),void 0)]}),void 0)]}),void 0)},$=function(){return $=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},$.apply(this,arguments)};var ee=function(e){var t=e.errorsCount,n=(0,i.s0)(),o=M();return(0,r.jsxs)("section",$({className:"welcome"},{children:[(0,r.jsx)("div",$({className:"welcome__logo"},{children:(0,r.jsx)("img",{src:"images/melody-logo.png",alt:"Угадай мелодию",width:"186",height:"83"},void 0)}),void 0),(0,r.jsx)("button",$({type:"submit",className:"welcome__button",onClick:function(){o(E),n(u.Game)}},{children:(0,r.jsx)("span",$({className:"visually-hidden"},{children:"Начать игру"}),void 0)}),void 0),(0,r.jsx)("h2",$({className:"welcome__rules-title"},{children:"Правила игры"}),void 0),(0,r.jsx)("p",$({className:"welcome__text"},{children:"Правила просты:"}),void 0),(0,r.jsxs)("ul",$({className:"welcome__rules-list"},{children:[(0,r.jsx)("li",{children:"Нужно ответить на все вопросы."},void 0),(0,r.jsxs)("li",{children:["Можно допустить ",t," ошибки."]},void 0)]}),void 0),(0,r.jsx)("p",$({className:"welcome__text"},{children:"Удачи!"}),void 0)]}),void 0)},te=function(e){if(!z().isAxiosError(e))throw e;var t=function(e){H.dispatch(F(e)),H.dispatch(se())},n=e.response;if(n)switch(n.status){case l.BAD_REQUEST:case l.UNAUTHORIZED:case l.NOT_FOUND:t(n.data.error)}},ne=(0,y.PH)("".concat(f.Process).concat(m.RedirectToRoute)),re=function(e,t,n,r){return new(n||(n=Promise))((function(o,s){function a(e){try{c(r.next(e))}catch(e){s(e)}}function i(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,i)}c((r=r.apply(e,t||[])).next())}))},oe=function(e,t){var n,r,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(s){return function(i){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,i])}}},se=(0,y.hg)("".concat(f.Error).concat(m.ClearError),(function(){setTimeout((function(){return H.dispatch(F(""))}),2e3)})),ae=(0,y.hg)("".concat(f.Data).concat(m.FetchQuestions),(function(e,t){var n=t.dispatch,r=t.extra;return re(void 0,void 0,void 0,(function(){var e,t;return oe(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,r.get(h.Questions)];case 1:return e=o.sent().data,n(P(e)),[3,3];case 2:return t=o.sent(),te(t),[3,3];case 3:return[2]}}))}))})),ie=(0,y.hg)("".concat(f.User).concat(m.CheckAuth),(function(e,t){var n=t.dispatch,r=t.extra;return re(void 0,void 0,void 0,(function(){var e;return oe(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,r.get(h.Login)];case 1:return t.sent(),n(T(d.Auth)),[3,3];case 2:return e=t.sent(),te(e),n(T(d.NoAuth)),[3,3];case 3:return[2]}}))}))})),ce=(0,y.hg)("".concat(f.User).concat(m.Login),(function(e,t){var n=e.login,r=e.password,o=t.dispatch,s=t.extra;return re(void 0,void 0,void 0,(function(){var e;return oe(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,s.post(h.Login,{email:n,password:r})];case 1:return function(e){localStorage.setItem(B,e)}(t.sent().data.token),o(T(d.Auth)),o(ne(u.Result)),[3,3];case 2:return e=t.sent(),te(e),o(T(d.NoAuth)),[3,3];case 3:return[2]}}))}))})),le=(0,y.hg)("".concat(f.User).concat(m.Logout),(function(e,t){var n=t.dispatch,r=t.extra;return re(void 0,void 0,void 0,(function(){var e;return oe(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,r.delete(h.Logout)];case 1:return t.sent(),localStorage.removeItem(B),n(T(d.NoAuth)),[3,3];case 2:return e=t.sent(),te(e),[3,3];case 3:return[2]}}))}))})),ue=function(){return ue=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ue.apply(this,arguments)};var de=function(){var e=(0,o.useRef)(null),t=(0,o.useRef)(null),n=(0,i.s0)(),s=M();return(0,r.jsxs)("section",ue({className:"login"},{children:[(0,r.jsx)("div",ue({className:"login__logo"},{children:(0,r.jsx)("img",{src:"images/melody-logo.png",alt:"Угадай мелодию",width:"186",height:"83"},void 0)}),void 0),(0,r.jsx)("h2",ue({className:"login__title"},{children:"Вы настоящий меломан!"}),void 0),(0,r.jsx)("p",ue({className:"login__text"},{children:"Хотите узнать свой результат? Представтесь!"}),void 0),(0,r.jsxs)("form",ue({className:"login__form",action:"",onSubmit:function(n){var r;n.preventDefault(),null!==e.current&&null!==t.current&&(r={login:e.current.value,password:t.current.value},s(ce(r)))}},{children:[(0,r.jsxs)("p",ue({className:"login__field"},{children:[(0,r.jsx)("label",ue({className:"login__label",htmlFor:"name"},{children:"Логин"}),void 0),(0,r.jsx)("input",{ref:e,className:"login__input",type:"text",name:"name",id:"name","data-testid":"login"},void 0)]}),void 0),(0,r.jsxs)("p",ue({className:"login__field"},{children:[(0,r.jsx)("label",ue({className:"login__label",htmlFor:"password"},{children:"Пароль"}),void 0),(0,r.jsx)("input",{ref:t,className:"login__input",type:"text",name:"password",id:"password","data-testid":"password"},void 0),(0,r.jsx)("span",ue({className:"login__error"},{children:"Неверный пароль"}),void 0)]}),void 0),(0,r.jsx)("button",ue({className:"login__button button",type:"submit"},{children:"Войти"}),void 0)]}),void 0),(0,r.jsx)("button",ue({onClick:function(){return n(u.Game)},className:"replay",type:"button"},{children:"Сыграть ещё раз"}),void 0)]}),void 0)},ve=function(){return ve=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ve.apply(this,arguments)};var he=function(){var e=(0,i.s0)(),t=M();return(0,r.jsxs)("section",ve({className:"result"},{children:[(0,r.jsx)("div",ve({className:"result__logo"},{children:(0,r.jsx)("img",{src:"images/melody-logo.png",alt:"Угадай мелодию",width:"186",height:"83"},void 0)}),void 0),(0,r.jsx)("h2",ve({className:"result__title"},{children:"Какая жалость!"}),void 0),(0,r.jsx)("p",ve({className:"result__total result__total--fail"},{children:"У вас закончились все попытки. Ничего, повезёт в следующий раз!"}),void 0),(0,r.jsx)("button",ve({onClick:function(){t(E()),e(u.Game)},className:"replay",type:"button"},{children:"Попробовать ещё раз"}),void 0)]}),void 0)},fe=function(e){var t;return(null===(t=e[f.Process])||void 0===t?void 0:t.step)||0},pe=function(e){var t;return(null===(t=e[f.Process])||void 0===t?void 0:t.mistakes)||0},me=function(){return me=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},me.apply(this,arguments)};var ge=function(){var e=Y(fe),t=Y(pe),n=(0,i.s0)(),o=M(),s=e-t;return(0,r.jsxs)("section",me({className:"result"},{children:[(0,r.jsx)("div",me({className:"result-logout__wrapper"},{children:(0,r.jsx)(Z.rU,me({className:"result-logout__link",onClick:function(e){e.preventDefault(),o(le)},to:"/"},{children:"Выход"}),void 0)}),void 0),(0,r.jsx)("div",me({className:"result__logo"},{children:(0,r.jsx)("img",{src:"images/melody-logo.png",alt:"Угадай мелодию",width:"186",height:"83"},void 0)}),void 0),(0,r.jsx)("h2",me({className:"result__title"},{children:"Вы настоящий меломан!"}),void 0),(0,r.jsxs)("p",me({className:"result__total"},{children:["Вы ответили правильно на ",s," вопросов и совершили ",t," ошибки"]}),void 0),(0,r.jsx)("button",me({onClick:function(){o(E()),n(u.Game)},className:"replay",type:"button"},{children:"Сыграть ещё раз"}),void 0)]}),void 0)},je=function(){return je=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},je.apply(this,arguments)};var xe=function(e){var t=e.isPlaying,n=e.src,s=e.onPlayButtonClick,a=(0,o.useState)(!0),i=a[0],c=a[1],l=(0,o.useRef)(null);return(0,o.useEffect)((function(){return null!==l.current&&(l.current.onloadeddata=function(){return c(!1)}),function(){null!==l.current&&(l.current.onloadeddata=null,l.current=null)}}),[n]),(0,o.useEffect)((function(){null!==l.current&&(t?l.current.play():l.current.pause())}),[t]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{className:"track__button track__button--".concat(t?"pause":"play"),type:"button",disabled:i,onClick:s},void 0),(0,r.jsx)("div",je({className:"track__status"},{children:(0,r.jsx)("audio",{src:n,ref:l,"data-testid":"audio"},void 0)}),void 0)]},void 0)},ye=function(){return ye=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ye.apply(this,arguments)};var _e=function(e){return function(t){var n=(0,o.useState)(0),s=n[0],a=n[1];return(0,r.jsx)(e,ye({},t,{renderPlayer:function(e,t){return(0,r.jsx)(xe,{src:e,isPlaying:t===s,onPlayButtonClick:function(){a(s===t?-1:t)}},void 0)}}),void 0)}},we=function(){return we=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},we.apply(this,arguments)};var be=function(){return be=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},be.apply(this,arguments)};var Ne=function(e){var t=e.answer,n=e.id,o=e.onChange,s=e.renderPlayer,a=e.userAnswer;return(0,r.jsxs)("div",be({className:"track"},{children:[s(t.src,n),(0,r.jsxs)("div",be({className:"game__answer"},{children:[(0,r.jsx)("input",{className:"game__input visually-hidden",type:"checkbox",name:"answer",value:"answer-".concat(n),id:"answer-".concat(n),checked:a,onChange:function(e){var t=e.target.checked;o(n,t)}},void 0),(0,r.jsx)("label",be({className:"game__check",htmlFor:"answer-".concat(n)},{children:"Отметить"}),void 0)]}),void 0)]}),void 0)},Oe=function(){return Oe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Oe.apply(this,arguments)};var Ae=function(e){var t=e.onAnswer,n=e.question,s=e.renderPlayer,a=n.answers,i=function(e){var t=e.answers.length,n=(0,o.useState)(Array.from({length:t},(function(){return!1}))),r=n[0],s=n[1];return[r,function(e,t){var n=r.slice(0);n[e]=t,s(n)}]}(n),c=i[0],l=i[1];return(0,r.jsxs)("form",Oe({className:"game__tracks",onSubmit:function(e){e.preventDefault(),t(n,c)}},{children:[a.map((function(e,t){var n="".concat(t,"=").concat(e.src);return(0,r.jsx)(Ne,{answer:e,id:t,onChange:l,renderPlayer:s,userAnswer:c[t]},n)})),(0,r.jsx)("button",Oe({className:"game__submit button",type:"submit"},{children:"Ответить"}),void 0)]}),void 0)},ke=function(){return ke=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ke.apply(this,arguments)};var Pe=function(e){var t=e.question,n=e.onAnswer,o=e.renderPlayer,s=e.children,a=t.genre;return(0,r.jsxs)("section",ke({className:"game game--genre"},{children:[(0,r.jsxs)("header",ke({className:"game__header"},{children:[(0,r.jsx)(X,{},void 0),(0,r.jsx)("svg",ke({xmlns:"http://www.w3.org/2000/svg",className:"timer",viewBox:"0 0 780 780"},{children:(0,r.jsx)("circle",{className:"timer__line",cx:"390",cy:"390",r:"370",style:{filter:"url(#blur)",transform:"rotate(-90deg) scaleY(-1)",transformOrigin:"center"}},void 0)}),void 0),s]}),void 0),(0,r.jsxs)("section",ke({className:"game__screen"},{children:[(0,r.jsxs)("h2",ke({className:"game__title"},{children:["Выберите ",a," треки"]}),void 0),(0,r.jsx)(Ae,{question:t,onAnswer:n,renderPlayer:o},void 0)]}),void 0)]}),void 0)},Ue=function(){return Ue=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ue.apply(this,arguments)};var Re=function(e){var t=e.count,n=Array.from({length:t},(function(){return""}));return(0,r.jsx)("div",Ue({className:"game__mistakes"},{children:n.map((function(e,t){var n="mistakes-".concat(t);return(0,r.jsx)("div",{className:"wrong","data-testid":"mistake"},n)}))}),void 0)},Se=function(e){var t;return(null===(t=e[f.Data])||void 0===t?void 0:t.questions)||[]},Ee=function(e){var t;return(null===(t=e[f.Data])||void 0===t?void 0:t.isDataLoaded)||!1},Ce=function(){return Ce=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ce.apply(this,arguments)},De=_e((function(e){var t=e.question,n=e.onAnswer,o=e.renderPlayer,s=e.children,a=t.answers,i=t.song;return(0,r.jsxs)("section",we({className:"game game--artist"},{children:[(0,r.jsxs)("header",we({className:"game__header"},{children:[(0,r.jsx)(X,{},void 0),(0,r.jsx)("svg",we({xmlns:"http://www.w3.org/2000/svg",className:"timer",viewBox:"0 0 780 780"},{children:(0,r.jsx)("circle",{className:"timer__line",cx:"390",cy:"390",r:"370",style:{filter:"url(#blur)",transform:"rotate(-90deg) scaleY(-1)",transformOrigin:"center"}},void 0)}),void 0),s]}),void 0),(0,r.jsxs)("section",we({className:"game__screen"},{children:[(0,r.jsx)("h2",we({className:"game__title"},{children:"Кто исполняет эту песню?"}),void 0),(0,r.jsx)("div",we({className:"game__track"},{children:(0,r.jsx)("div",we({className:"track"},{children:o(i.src,0)}),void 0)}),void 0),(0,r.jsx)("form",we({className:"game__artist"},{children:a.map((function(e,o){return(0,r.jsxs)("div",we({className:"artist"},{children:[(0,r.jsx)("input",{className:"artist__input visually-hidden",type:"radio",name:"answer",value:"artist-".concat(o),id:"answer-".concat(o),onChange:function(r){r.preventDefault(),n(t,e.artist)}},void 0),(0,r.jsx)("label",we({className:"artist__name",htmlFor:"answer-".concat(o)},{children:(0,r.jsx)("img",{className:"artist__picture",src:e.picture,alt:e.artist},void 0)}),void 0)]}),e.artist)}))}),void 0)]}),void 0)]}),void 0)})),Le=_e(Pe);var Te=function(){var e=Y(fe),t=Y(pe),n=Y(Se),o=M(),s=n[e];if(t>=3)return(0,r.jsx)(i.Fg,{to:u.Lose},void 0);if(e>=n.length||!s)return(0,r.jsx)(i.Fg,{to:u.Result},void 0);var a=function(e,t){o(S()),o(C({question:e,userAnswer:t}))};switch(s.type){case v.Artist:return(0,r.jsx)(De,Ce({question:s,onAnswer:a},{children:(0,r.jsx)(Re,{count:t},void 0)}),e);case v.Genre:return(0,r.jsx)(Le,Ce({question:s,onAnswer:a},{children:(0,r.jsx)(Re,{count:t},void 0)}),e);default:return(0,r.jsx)(i.Fg,{to:u.Root},void 0)}};var qe=function(e){var t=e.authorizationStatus,n=e.children;return t===d.Auth?n:(0,r.jsx)(i.Fg,{to:u.Login},void 0)},Fe=function(){return Fe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Fe.apply(this,arguments)};var Ge=function(e){var t=e.authStatus;return(0,r.jsxs)(i.Z5,{children:[(0,r.jsx)(i.AW,{path:u.Root,element:(0,r.jsx)(ee,{errorsCount:3},void 0)},void 0),(0,r.jsx)(i.AW,{path:u.Login,element:(0,r.jsx)(de,{},void 0)},void 0),(0,r.jsx)(i.AW,{path:u.Lose,element:(0,r.jsx)(he,{},void 0)},void 0),(0,r.jsx)(i.AW,{path:u.Result,element:(0,r.jsx)(qe,Fe({authorizationStatus:t},{children:(0,r.jsx)(ge,{},void 0)}),void 0)},void 0),(0,r.jsx)(i.AW,{path:u.Game,element:(0,r.jsx)(Te,{},void 0)},void 0),(0,r.jsx)(i.AW,{path:u.NotFound,element:(0,r.jsx)(V,{},void 0)},void 0)]},void 0)};var Qe=function(){return(0,r.jsx)("p",{children:"Loading ..."},void 0)},ze=function(e){return e[f.User].authorizationStatus};var Be=function(){var e=Y(ze),t=Y(Ee);return function(e){return e===d.Unknown}(e)||!t?(0,r.jsx)(Qe,{},void 0):(0,r.jsx)(Ge,{authStatus:e},void 0)},Ie=function(){return Ie=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ie.apply(this,arguments)};var We=function(){var e=Y((function(e){return e.ERROR})).error;return e?(0,r.jsx)("div",Ie({style:{position:"fixed",top:"30px",right:"30px",padding:"10px",backgroundColor:"#d96666",color:"white",borderRadius:"5px"}},{children:e}),void 0):null},He=function(){return He=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},He.apply(this,arguments)},Me=document.getElementById("root");H.dispatch(ae()),H.dispatch(ie()),s.render((0,r.jsx)(o.StrictMode,{children:(0,r.jsx)(a.zt,He({store:H},{children:(0,r.jsxs)(j,He({history:x},{children:[(0,r.jsx)(We,{},void 0),(0,r.jsx)(Be,{},void 0)]}),void 0)}),void 0)},void 0),Me)}},function(e){e.O(0,[216],(function(){return t=4374,e(e.s=t);var t}));e.O()}]);